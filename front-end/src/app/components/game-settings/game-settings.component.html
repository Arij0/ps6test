
Arij0/ps6test
main

GITHUB

User story
En tant que ergothérapeute Je veux configurer les paramètres d’accessibilité et de jeu Afin queles enfants ayant des besoins spécifiques (par exemple dyslexie) puissent bénéficier d'une expérience d’apprentissage personnalisée et adaptée.
Critères d'acceptation:
* Je peux choisir un niveau de difficulté basé sur :
   * la longueur des mots,
   * la présence de lettres similaires/confusables (ex : b/d, p/q, m/n),
   * la complexité phonétique ou orthographique.
* Je peux sélectionner le type d’indices (texte, animation, image, audio).
* Je peux configurer le nombre d’indices disponibles par exercice.
* Je peux définir le délai d’apparition des indices après une erreur.
* Je peux ajuster la vitesse du jeu avec un curseur (de 1 à 10).
* Je peux choisir le mode d’interaction (clic souris, saisie vocale, clavier).
* Je peux activer ou désactiver un minuteur, et définir sa durée.
* Je peux choisir de masquer les mauvaises réponses après sélection.
* Je peux choisir si le score final est affiché ou non.
* Je peux choisir le niveau de retour (feedback) : aucun, basique, détaillé, très détaillé. je veux plus que parametre du jeux soit lier avec l'ajout d'enfant mais plutot qu'il soit lie avec le jeu lui meme donc

Edit
Je vois que vous souhaitez implémenter une fonctionnalité d'accessibilité pour votre application de jeu éducatif en Angular afin de répondre aux besoins spécifiques d'enfants, notamment ceux présentant des troubles comme la dyslexie.

D'après les fichiers partagés, vous avez déjà:

Un composant GameComponent qui gère la logique du jeu
Un composant GameSettingsComponent avec quelques paramètres de base
Un formulaire utilisateur pour ajouter un enfant
Pour répondre à votre user story, il faudrait enrichir le composant GameSettingsComponent pour intégrer tous les paramètres d'accessibilité mentionnés dans vos critères d'acceptation, et s'assurer que ces paramètres soient liés au jeu lui-même plutôt qu'à un enfant spécifique.

Voici ce que je vous propose de faire:

Modifier le GameSettingsComponent pour inclure tous les paramètres d'accessibilité demandés
Créer un service pour partager ces paramètres entre les composants
Adapter le GameComponent pour utiliser ces paramètres
Commençons par la mise à jour du GameSettingsComponent:

typescript
// game-settings.component.ts
import { Component, OnInit, Output, EventEmitter } from '@angular/core';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';

// Interface pour définir la structure des paramètres du jeu
export interface GameSettings {
  difficulty: string;
  wordLength: string;
  confusableLetters: boolean;
  phoneticComplexity: string;
  hintType: string[];
  hintsCount: number;
  hintDelay: number;
  gameSpeed: number;
  interactionMode: string;
  timerEnabled: boolean;
  timerDuration: number;
  hideIncorrectAnswers: boolean;
  showFinalScore: boolean;
  feedbackLevel: string;
  showRemainingTime: boolean;
  motivationalMessage: string;
}

@Component({
  selector: 'app-game-settings',
  templateUrl: './game-settings.component.html',
  styleUrls: ['./game-settings.component.scss']
})
export class GameSettingsComponent implements OnInit {
  @Output() settingsChanged = new EventEmitter<GameSettings>();
  
  settingsForm: FormGroup;
  
  // Options pour les différents sélecteurs
  difficultyOptions = [
    { value: 'easy', label: 'Facile' },
    { value: 'medium', label: 'Moyen' },
    { value: 'hard', label: 'Difficile' }
  ];
  
  wordLengthOptions = [
    { value: 'short', label: 'Courts (3-4 lettres)' },
    { value: 'medium', label: 'Moyens (5-7 lettres)' },
    { value: 'long', label: 'Longs (8+ lettres)' }
  ];
  
  phoneticComplexityOptions = [
    { value: 'simple', label: 'Simple' },
    { value: 'intermediate', label: 'Intermédiaire' },
    { value: 'complex', label: 'Complexe' }
  ];
  
  hintTypeOptions = [
    { value: 'text', label: 'Texte' },
    { value: 'animation', label: 'Animation' },
    { value: 'image', label: 'Image' },
    { value: 'audio', label: 'Audio' }
  ];
  
  interactionModeOptions = [
    { value: 'mouse', label: 'Souris' },
    { value: 'keyboard', label: 'Clavier' },
    { value: 'voice', label: 'Commande vocale' }
  ];
  
  feedbackLevelOptions = [
    { value: 'none', label: 'Aucun' },
    { value: 'basic', label: 'Basique' },
    { value: 'detailed', label: 'Détaillé' },
    { value: 'very-detailed', label: 'Très détaillé' }
  ];
  
  constructor(private fb: FormBuilder) {
    this.settingsForm = this.fb.group({
      // Difficulté
      difficulty: ['medium', Validators.required],
      wordLength: ['medium', Validators.required],
      confusableLetters: [false],
      phoneticComplexity: ['simple', Validators.required],
      
      // Indices
      hintType: [['text'], Validators.required],
      hintsCount: [3, [Validators.required, Validators.min(0), Validators.max(5)]],
      hintDelay: [5, [Validators.required, Validators.min(0), Validators.max(30)]],
      
      // Vitesse et interaction
      gameSpeed: [5, [Validators.required, Validators.min(1), Validators.max(10)]],
      interactionMode: ['mouse', Validators.required],
      
      // Chronométrage
      timerEnabled: [true],
      timerDuration: [60, [Validators.required, Validators.min(10), Validators.max(300)]],
      showRemainingTime: [true],
      
      // Feedback et affichage
      hideIncorrectAnswers: [false],
      showFinalScore: [true],
      feedbackLevel: ['basic', Validators.required],
      motivationalMessage: ['Tu peux y arriver !']
    });
  }

  ngOnInit(): void {
    this.setupFormListeners();
    // Émettre les paramètres initiaux
    this.emitCurrentSettings();
  }

  private setupFormListeners(): void {
    // Activer/désactiver le champ timerDuration en fonction de timerEnabled
    this.settingsForm.get('timerEnabled')?.valueChanges.subscribe(enabled => {
      const timerDurationControl = this.settingsForm.get('timerDuration');
      const showRemainingTimeControl = this.settingsForm.get('showRemainingTime');
      
      if (timerDurationControl && showRemainingTimeControl) {
        if (enabled) {
          timerDurationControl.enable();
          showRemainingTimeControl.enable();
        } else {
          timerDurationControl.disable();
          showRemainingTimeControl.disable();
        }
      }
    });
    
    // Écouter les changements du formulaire et émettre les nouveaux paramètres
    this.settingsForm.valueChanges.subscribe(() => {
      this.emitCurrentSettings();
    });
  }

  emitCurrentSettings(): void {
    if (this.settingsForm.valid) {
      this.settingsChanged.emit(this.settingsForm.value as GameSettings);
    }
  }

  saveSettings(): void {
    if (this.settingsForm.valid) {
      // Enregistrer les paramètres (localStorage, service, etc.)
      console.log('Paramètres enregistrés:', this.settingsForm.value);
      this.emitCurrentSettings();
      // Vous pourriez ajouter une notification de succès ici
    }
  }

  resetToDefault(): void {
    this.settingsForm.reset({
      difficulty: 'medium',
      wordLength: 'medium',
      confusableLetters: false,
      phoneticComplexity: 'simple',
      hintType: ['text'],
      hintsCount: 3,
      hintDelay: 5,
      gameSpeed: 5,
      interactionMode: 'mouse',
      timerEnabled: true,
      timerDuration: 60,
      showRemainingTime: true,
      hideIncorrectAnswers: false,
      showFinalScore: true,
      feedbackLevel: 'basic',
      motivationalMessage: 'Tu peux y arriver !'
    });
  }
}
Maintenant, mettons à jour le template HTML pour ce composant:


Improved Game Settings Component HTML
Code 
Et voici le CSS correspondant pour ce composant:


Improved Game Settings Component SCSS
Code 
Maintenant, créons un service pour partager ces paramètres entre les composants:


Game Settings Service
Code 
Enfin, adaptons le GameComponent pour utiliser ces paramètres:


Updated Game Component
Code 






<div class="form-container game-settings-container">
  <h2>Paramètres d'accessibilité et de jeu</h2>
  
  <form [formGroup]="settingsForm" class="settings-form">
    <!-- Section Difficulté -->
    <div class="settings-section">
      <h3>Niveau de difficulté</h3>
      
      <div class="setting-group">
        <label for="difficultySelect">Difficulté globale:</label>
        <select id="difficultySelect" formControlName="difficulty" class="form-select">
          <option *ngFor="let option of difficultyOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
      
      <div class="setting-group">
        <label for="wordLengthSelect">Longueur des mots:</label>
        <select id="wordLengthSelect" formControlName="wordLength" class="form-select">
          <option *ngFor="let option of wordLengthOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
      
      <div class="setting-group checkbox-group">
        <label>
          <input type="checkbox" formControlName="confusableLetters">
          Inclure des lettres similaires/confusables (ex: b/d, p/q, m/n)
        </label>
      </div>
      
      <div class="setting-group">
        <label for="phoneticComplexitySelect">Complexité phonétique:</label>
        <select id="phoneticComplexitySelect" formControlName="phoneticComplexity" class="form-select">
          <option *ngFor="let option of phoneticComplexityOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
    </div>
    
    <!-- Section Indices -->
    <div class="settings-section">
      <h3>Indices et aides</h3>
      
      <div class="setting-group">
        <label>Type d'indices:</label>
        <div class="checkbox-group">
          <label *ngFor="let option of hintTypeOptions">
            <input type="checkbox" [value]="option.value" 
                   (change)="$event.target.checked 
                     ? settingsForm.get('hintType')?.value.push(option.value) 
                     : settingsForm.get('hintType')?.value.splice(settingsForm.get('hintType')?.value.indexOf(option.value), 1)">
            {{ option.label }}
          </label>
        </div>
      </div>
      
      <div class="setting-group">
        <label for="hintsCountInput">Nombre d'indices disponibles:</label>
        <input type="number" id="hintsCountInput" formControlName="hintsCount" min="0" max="5" class="form-input">
      </div>
      
      <div class="setting-group">
        <label for="hintDelayInput">Délai d'apparition des indices (secondes):</label>
        <input type="number" id="hintDelayInput" formControlName="hintDelay" min="0" max="30" class="form-input">
      </div>
    </div>
    
    <!-- Section Vitesse et Interaction -->
    <div class="settings-section">
      <h3>Vitesse et interaction</h3>
      
      <div class="setting-group">
        <label for="gameSpeedSlider">Vitesse du jeu:</label>
        <div class="slider-container">
          <input type="range" id="gameSpeedSlider" formControlName="gameSpeed" min="1" max="10" class="form-slider">
          <span>{{ settingsForm.get('gameSpeed')?.value }} / 10</span>
        </div>
      </div>
      
      <div class="setting-group">
        <label for="interactionModeSelect">Mode d'interaction:</label>
        <select id="interactionModeSelect" formControlName="interactionMode" class="form-select">
          <option *ngFor="let option of interactionModeOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
    </div>
    
    <!-- Section Chronométrage -->
    <div class="settings-section">
      <h3>Chronométrage</h3>
      
      <div class="setting-group checkbox-group">
        <label>
          <input type="checkbox" formControlName="timerEnabled">
          Activer le minuteur
        </label>
      </div>
      
      <div class="setting-group" *ngIf="settingsForm.get('timerEnabled')?.value">
        <label for="timerDurationInput">Durée du minuteur (secondes):</label>
        <input type="number" id="timerDurationInput" formControlName="timerDuration" min="10" max="300" class="form-input">
      </div>
      
      <div class="setting-group checkbox-group" *ngIf="settingsForm.get('timerEnabled')?.value">
        <label>
          <input type="checkbox" formControlName="showRemainingTime">
          Afficher le temps restant
        </label>
      </div>
    </div>
    
    <!-- Section Feedback et Affichage -->
    <div class="settings-section">
      <h3>Retour et affichage</h3>
      
      <div class="setting-group checkbox-group">
        <label>
          <input type="checkbox" formControlName="hideIncorrectAnswers">
          Masquer les mauvaises réponses après sélection
        </label>
      </div>
      
      <div class="setting-group checkbox-group">
        <label>
          <input type="checkbox" formControlName="showFinalScore">
          Afficher le score final
        </label>
      </div>
      
      <div class="setting-group">
        <label for="feedbackLevelSelect">Niveau de retour (feedback):</label>
        <select id="feedbackLevelSelect" formControlName="feedbackLevel" class="form-select">
          <option *ngFor="let option of feedbackLevelOptions" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
      </div>
      
      <div class="setting-group">
        <label for="motivationalMessageInput">Message d'encouragement:</label>
        <input type="text" id="motivationalMessageInput" formControlName="motivationalMessage" class="form-input" maxlength="100">
      </div>
    </div>
    
    <!-- Boutons -->
    <div class="buttons-container">
      <button type="button" class="btn-save" (click)="saveSettings()">Enregistrer les paramètres</button>
      <button type="button" class="btn-reset" (click)="resetToDefault()">Réinitialiser</button>
    </div>
  </form>
</div>
